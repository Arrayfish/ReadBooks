# ドメインモデリングについて

DDDにおいて、機能性を高めるための手法  
ビジネスサイドと協力して作成する  
モデリング手法として有名なものに次のようなものがあるらしい

- sudoモデリング、
- Event Storming
- リレーションシップ駆動要件分析(RDRA)
- ユースケース駆動分析設計(ICONIX)

## sudoモデリング

最低4つのモデル図を作成する

- システム関連図(s): 開発するシステムと関連するアクターや外部システムとの関係を示す 検索してもあまり出てこない。
- ユースケース図(u): ユーザーがシステムを通じて行えるアクションを表現します
- ドメインモデル図(d): ユビキタス言語を使用し、ドメインの概念やその関係を表現します
- オブジェクト図(o): ドメインモデルの具体例を示し、属性や関連、ルール/制約を記述します

次の2つを必要に応じて追加する

- 状態遷移図
- ER図

実践のポイント

- ユースケース記述を作成し、ユビキタス言語を抽出する
- ドメインモデル図では、属性を記入し、関連性を線で表現する
- オブジェクト図では、具体的な例を用いてドメインモデルを表現する
- 吹き出しを使用して、仕様やビジネスロジックを記述する

試しに予約機能を参考にmermaidで図を作成してみる

### 感想

ユースケース図からオブジェクト図&ドメインモデル図に持っていくのがきつい。
ユースケースを見ただけで、どんな感じの処理にするのかがわかるわけがない。

### システム関連図(s)


```mermaid
---
title: システム関連図(全体)
---
flowchart LR
    user((利用者)) --予約--> b[Bqey]
    mng((管理者)) --予約--> b
    b --プッシュ通知依頼--> f[firebase]
    f --プッシュ通知--> user
    f --プッシュ通知--> mng
    b --Freekey予約/変更/削除--> FGW[外部システム<br>FreekeyGW]
    b --エンジン制御依頼--> MCCS[外部システム<br>MCCSサーバ]
    b --メール--> user
    FGW --予約適用-->car([車両])
    MCCS --エンジン制御-->car
```

### ユースケース図(u)

```mermaid
---
title: 全体
---
flowchart LR
    subgraph Bqey
        reg_res[予約を登録する]
        mod_res[予約を変更する]
        del_res[予約を削除する]
        check_res[予約を確認する]
        use_car[車両を利用する]
        rtn_car[車両を返却する]
        reg_alc[アルコールチェックを行う]
        reg_op_record[運行記録を登録する]
        reg_day_chk[日常点検を登録する]
        reg_pas[同乗者を登録する]
        del_pas[同乗者を削除する]
    end
    user((利用者)) --- reg_res
```
