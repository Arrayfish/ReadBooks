# SQSについてのメモ

## その他

- lambdaのSQSトリガーでのバッチ数はlambda側で確認できる
- デッドレターきゅー周りがわからん
  - どうやってDLQに入れるのか？
  - 入れた後にどうやって処理する？

## 標準キューとFIFOキュー

### 標準キュー

- 標準キューは最低一回配信を保証
- メッセージの順序は保証されない
- 1秒あたりほぼ無制限のAPIコール

### FIFOキュー

- メッセージの重複排除が可能
- メッセージグループごとに順序が保証される
- fifoキューは連携できないAWSサービスがある(S3イベント通知, IoTルールアクションなど)
- 1秒あたり300APIコール(バッチで最大3,000)

## メッセージの削除

- 一般的にはメッセージを受診しても、明示的に削除しない限りはキューに残り続ける
- LambdaのSQSトリガーや、一部のSDKでは処理が成功した場合に自動でメッセージを削除することができる。

## デッドレターキュー

キューを指定してそれをデッドレターキューとして設定できる。
メッセージが一定回数以上処理されなかった場合に、元のキューからデッドレターキューにメッセージが移動される。